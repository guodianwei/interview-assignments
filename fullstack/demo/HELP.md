# 说明

### 设计中需要考虑的关键点

短链接生成规则:

* long型作为唯一标识 最大2^64，对其转成成62进制（10 个数字 + (a-z)26 个小写字母 + (A-Z)26 个大写字母组成的数）。
* 采用redisson作为发号器，天然分布式为后面分库分表预留。

采用分布式设计
* 服务器端采用springboot，节点可以动态扩展
* 数据库mysql （可考虑NOSQL数据库） 

缓存设计（分布式缓存redisson）


* 分布式缓存redisson之发号器，利用其RLongAdder原子性生成唯一ID，可以支持动态增加节点和数据库分表。
* 分布式缓存redisson之RMap ，提供元素淘汰(设定 有效时间 和 最长闲置时间),地缓存提高响应时间，数据分片集群扩展
* 布隆过滤器(防攻击、缓存击穿)
  
数据查询策略：

* 布隆过滤器可有效屏蔽攻击性查询，如果数据不存在直接返回，判断存在则查询缓存，如果缓存不存在需要查询数据，并把数据放入缓存
* Read-Through 策略下，无需关注缓存与数据库一致性问题，委托给缓存提供的机制。为数据库减轻访问压力，提供弹性。
     初始化加载热点数据（监控数据占用内存）。
* Write-Behind 策略下，新增数据只需要把数据放入缓存即可，缓存框架完成异步写入数据库（可以指定批量写入数量），减少负载，提高响应速度  

思考点

* 尤其采用了分布式缓存，虽然提高性能，同时也增加了维护成本， 需要严格监控数据量。redission 最好采用cluster部署方案，以便动态扩展节点增加内存
1 布隆过滤器虽然能够有效降低存储空间，由于数据量无法估计需要以1亿为单位，测试占用的空间，
2 RMap对于热点数据算法，也需要严格监控 。
* 应计算每条数据大小，以亿为单位计算存储所需空间，以此决定数据库分库方案
* 设置不同的数量级（缓存、数据库），来压测响应速度，进行调优，做好应对突然情况的预案。

整个代码没有做调试，纯粹盲写，最近公司太忙了，又想早点争取面试机会，非常抱歉！！！
